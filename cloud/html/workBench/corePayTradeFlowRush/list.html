<link rel="stylesheet" href="../../../css/lib/bootstrap-datetimepicker.min.css" />
<link rel="stylesheet" href="../../../css/lib/bootstrap-table.min.css" />
<div class="content_center">
	<div class="content_center_content">
		<!--查询条件-->
		<div class="content_center_condition">
			<form id="corePayTradeFlowRush" name="queryForm" role="form" class="form-inline">
				<div class="form-group">
					<label class="control-label">原平台流水号：</label>
					<input name="tradeOrderNo" class="form-control" type="text" placeholder="原平台流水号"
						autocomplete="off" />
				</div>
				<div class="form-group">
					<label class="control-label">冲账流水号：</label>
					<input type="text" name="orderNo" class="form-control" type="text" placeholder="冲账流水号"
						autocomplete="off" />
				</div>
				<div class="form-group">
					<label class="control-label">创建日期：</label>
					<input id="corePayTradeFlowRush_tradeDate" type="text" name="tradeDate"
						class="form-control form_datetime" readonly="readonly" placeholder="创建日期" />
				</div>
				<div class="form-group">
					<button id="corePayTradeFlowRush_button" type="button" class="btn btn-primary refreshBtn">
						<i class="fa fa-search"></i> 查询
					</button>
					<button type="reset" class="btn btn-default">
						<i class="fa fa-refresh"></i> 重置
					</button>
				</div>
				<div class="clearfix"></div>
			</form>
		</div>
		<div class="content_center_table">
			<div class="marginBottom">
				<button type="button" class="btn btn-primary" onclick="rush_Apply()">
					冲账申请
				</button>
			</div>
			<table cellpadding="0" cellspacing="0" border="0" id="corePayTradeFlowRushTable"
				class="table table-bordered table-hover"></table>
		</div>
	</div>
</div>
<style type="text/css">
	#corePayTradeFlowRushTable.table {
		width: 1800px;
	}
</style>
<script>
	$(function () {
		$("#corePayTradeFlowRush_tradeDate").datetimepicker({
			format: "yyyy-mm-dd",
			autoclose: true,
			language: "zh-CN",
			minView: "month",
			pickerPosition: "bottom-right"
		});
		corePayTradeFlowRushTable();
	});
	// 搜索
	$("#corePayTradeFlowRush_button").click(function () {
		$("#corePayTradeFlowRushTable").bootstrapTable("refresh");
	});

	/*表格加载*/
	function corePayTradeFlowRushTable() {
		$("#corePayTradeFlowRushTable").bootstrapTable({
			url: host_url + "/cloud-web/coreRushAcctFlow/workList",
			method: "GET",
			dataType: "json",
			contentType: "application/x-www-form-urlencoded;charset=UTF-8",
			pagination: true, //在表格底部显示分页工具栏
			pageNumber: 1,
			pageList: [20, 50, 100],
			clickToSelect: true,
			sidePagination: "server", //表格分页的位置
			cache: false, //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
			locale: "zh-CN", //中文支持
			queryParamsType: "limit",
			queryParams: function (params) {
				params.pageSize = params.limit; //页面大小
				params.page = params.offset / params.limit + 1; //页码
				params._sys_login_token = _get_sys_login_token();
				var paramForm = $("#corePayTradeFlowRush").serializeArray();
				$.each(paramForm, function (i, param) {
					params[param.name] = $.trim(param.value);
				});
				params.authStatus = 10;
				params.rushType = 10;
				return params;
			}, //参数
			columns: [
				{
					title: "序号",
					field: "index",
					width: 40,
					align: "center",
					valign: "middle",
					formatter: function (value, row, index) {
						var pageSize = $(
							"#corePayTradeFlowRushTable"
						).bootstrapTable("getOptions").pageSize;
						var pageNumber = $(
							"#corePayTradeFlowRushTable"
						).bootstrapTable("getOptions").pageNumber;
						return pageSize * (pageNumber - 1) + index + 1;
					}
				},
				{
					field: "cusOrderNo",
					title: "客户单号",
					width: 100,
					align: "center",
					valign: "middle"
				},
				{
					field: "tradeOrderNo",
					title: "原平台流水号",
					width: 120,
					align: "center",
					valign: "middle"
				},
				{
					field: "orderNo",
					title: "冲账流水号",
					width: 120,
					align: "center",
					valign: "middle"
				},
				{
					field: "payAmt",
					title: "存款金额(元)",
					width: 100,
					align: "right",
					valign: "middle",
					formatter: function (value, row, index) {
						return formatterMoney(value, 2);
					}
				},
				{
					field: "rushAmt",
					title: "冲账金额(元)",
					width: 100,
					align: "right",
					valign: "middle",
					formatter: function (value, row, index) {
						return formatterMoney(value, 2);
					}
				},
				{
					field: "operatorName",
					title: "操作员",
					width: 100,
					align: "center",
					valign: "middle"
				},
				{
					field: "returnMsg",
					title: "冲账原因",
					width: 100,
					align: "center",
					valign: "middle"
				},
				{
					field: "authStatus",
					title: "审核状态",
					width: 80,
					align: "center",
					valign: "middle",
					formatter: function (value, row, index) {
						return visualParams(MEMBER_AUDIT_STATUS, value);
					}
				},

				{
					field: "createTime",
					title: "创建时间",
					width: 100,
					align: "center",
					valign: "middle",
					formatter: function (value, row, index) {
						return getDateStr(value);
					}
				}
			],
			onClickRow: function (row, $element) {
				$($element)
					.addClass("table_info")
					.siblings()
					.removeClass("table_info");
			},
			onLoadSuccess: function (res) {
				//加载成功时执行
			}
		});
	}

	//冲账申请
	function rush_Apply() {
		Ewin.dialog({
			url: "../../../html/workBench/corePayTradeFlowRush/add.html",
			title: "冲账申请"
		});
	}
</script>