<div class="content_center">
	<div class="content_center_content">
		<form class="form-horizontal" name="add_form" role="form"  id="add_form">
				<div class="form-group">
					<label class="control-label col-xs-4 col-sm-3"><span class="red">*</span>系统编码：</label>
					<div class="col-xs-8 col-sm-7">
						<input type="text" class="form-control" id="add_sysCode" name="sysCode" placeholder="系统编码"  autocomplete="off">
						
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-xs-4 col-sm-3"><span class="red">*</span>参数名称：</label>
					<div class="col-xs-8 col-sm-7">
						<input type="text" class="form-control" id="add_paramName" name="paramName" placeholder="参数名称"  autocomplete="off">
						
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-xs-4 col-sm-3"><span class="red">*</span>参数代码：</label>
					<div class="col-xs-8 col-sm-7">
						<input type="text" class="form-control" id="add_paramCode" name="paramCode" placeholder="参数代码"  autocomplete="off">
						
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-xs-4 col-sm-3"><span class="red">*</span>参数值：</label>
					<div class="col-xs-8 col-sm-7">
						<input type="text" class="form-control" id="add_paramValue" name="paramValue" placeholder="参数值"  autocomplete="off">
						
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-xs-4 col-sm-3"><span class="red">*</span>状态：</label>
					<div class="col-xs-8 col-sm-7">
						<select name="status" id="add_status" class="form-control"></select>
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-xs-4 col-sm-3">描述：</label>
					<div class="col-xs-8 col-sm-7">
						<input type="text" class="form-control" id="add_paramDesc" name="paramDesc" placeholder="描述"  autocomplete="off">
						
					</div>
				</div>
		</form>
	</div>
	<div class="modal-footer" >
		<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
		<button type="button" class="btn btn-primary" onclick="_doSubmit()">确定</button>
	</div>
</div>
<script type="text/javascript">
$(function(){
	listOption($('#add_status'), AUTH_STATUS);
    $('#add_status').comboSelect({extendStyle: false});
	_validateForm();//验证初始化
});

//初始化验证框架
function _validateForm(){
	//进行表单验证
 	$('#add_form').bootstrapValidator({
	  	message: '输入值不合法',
      	feedbackIcons: {valid: 'glyphicon glyphicon-ok',invalid: 'glyphicon glyphicon-remove',validating: 'glyphicon glyphicon-refresh'},
      	excluded : [':disabled'],
      	fields: {
			sysCode:{
				message: '系统编码验证失败',
				validators: {
              	notEmpty: {message: '系统编码不能为空'}
            	}
			},
			paramName:{
				message: '参数名称验证失败',
				validators: {
              	notEmpty: {message: '参数名称不能为空'}
            	}
			},
			paramCode:{
				message: '参数代码验证失败',
				validators: {
              	notEmpty: {message: '参数代码不能为空'}
            	}
			},
			paramValue:{
				message: '参数值验证失败',
				validators: {
              	notEmpty: {message: '参数值不能为空'}
            	}
			},
   		}
	});
}

//提交
function _doSubmit(){
	var bv = $('#add_form').data('bootstrapValidator').validate();
	if (!bv.isValid()) {//验证不通过
		return;
	}
	
	var paramForm = $("#add_form").serializeArray();
	var params = {};
	$.each(paramForm, function(i, param){
		params[param.name]=$.trim(param.value);
	});
	sendAjax( 'POST', host_url+"/base-web/baseSysConstans/addSubmit", params, function(res){
		Ewin.alert({ message: '恭喜你，操作成功！' }).on(function(e){
			if(e){
				$('#add_form').parents('.modal').modal('hide');
				$(".table").bootstrapTable('refresh');
			}
		});
	});
}
</script>